(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();class B{modal;closeButton;constructor(e,t="closeModal"){this.modal=document.getElementById(e),this.closeButton=document.getElementById(t),this.init()}init(){this.closeButton.addEventListener("click",()=>this.close()),this.modal.addEventListener("click",e=>{e.target===this.modal&&this.close()})}open(){this.modal.classList.add("show")}close(){this.modal.classList.remove("show")}}class M{element;onMove;startX=0;isDragging=!1;constructor(e,t){this.element=e,this.onMove=t,this.init()}init(){this.element.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),this.element.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),this.element.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!1})}handleTouchStart(e){e.preventDefault(),this.startX=e.touches[0].clientX,this.isDragging=!0}handleTouchMove(e){if(!this.isDragging)return;e.preventDefault();const t=e.touches[0].clientX,n=t-this.startX;this.onMove(n),this.startX=t}handleTouchEnd(e){this.isDragging=!1}}class L{canvas;bucket;bucketPosition=50;fallingObjects=[];score=0;winScore=10;misses=0;gameLoop=null;onWin;onLose;gameResultElement=null;scoreDisplay;touchInput;constructor(e,t,n){this.canvas=document.getElementById(e),this.onWin=t,this.onLose=n,this.createBucket(),this.createScoreDisplay(),this.touchInput=new M(this.canvas,s=>this.moveBucket(s)),this.startGame()}createBucket(){this.bucket=document.createElement("div"),this.bucket.className="bucket",this.canvas.appendChild(this.bucket)}createScoreDisplay(){this.scoreDisplay=document.createElement("div"),this.scoreDisplay.className="score-display",this.canvas.appendChild(this.scoreDisplay),this.updateScoreDisplay()}createGameResultElement(){this.gameResultElement||(this.gameResultElement=document.createElement("div"),this.gameResultElement.className="game-result",this.canvas.appendChild(this.gameResultElement))}updateScoreDisplay(){this.scoreDisplay.textContent=`–ü–æ–π–º–∞–Ω–æ: ${this.score} / ${this.winScore}`}moveBucket(e){const t=this.canvas.clientWidth,n=this.bucket.clientWidth;this.bucketPosition+=e/t*100,this.bucketPosition=Math.max(0,Math.min(100,this.bucketPosition));const s=this.bucketPosition/100*(t-n);this.bucket.style.left=`${s}px`}startGame(){this.gameLoop=setInterval(()=>{this.updateFallingObjects(),this.spawnFallingObject()},100)}canSpawnObjects=!0;spawnFallingObject(){if(this.canSpawnObjects&&Math.random()<.09){const e=document.createElement("div");e.className="falling-object";const t=["üê°","üê†","üêü"];e.innerHTML=t[Math.floor(Math.random()*t.length)],e.style.left=`${Math.random()*80+10}%`,e.style.top="0px",this.canvas.appendChild(e),this.fallingObjects.push(e)}}updateFallingObjects(){this.fallingObjects.forEach((e,t)=>{const n=parseFloat(e.style.top||"0")+16;e.style.top=`${n}px`,this.checkCollision(e)?(this.score++,this.updateScoreDisplay(),e.remove(),this.fallingObjects.splice(t,1),this.score>=this.winScore&&this.win()):n>this.canvas.clientHeight&&(this.misses++,this.misses>=3&&this.lose(),e.remove(),this.fallingObjects.splice(t,1))})}checkCollision(e){const t=e.getBoundingClientRect(),n=this.bucket.getBoundingClientRect();return!(t.right<n.left||t.left>n.right||t.bottom<n.top||t.top>n.bottom)}win(){this.gameLoop&&clearInterval(this.gameLoop),this.canSpawnObjects=!1,this.createGameResultElement(),this.gameResultElement&&(this.gameResultElement.textContent="–ü–æ–±–µ–¥–∞",this.gameResultElement.classList.add("winMenu"),this.gameResultElement.style.display="block"),setTimeout(()=>this.onWin(),1e3)}lose(){this.gameLoop&&clearInterval(this.gameLoop),this.canSpawnObjects=!1,this.createGameResultElement(),this.gameResultElement&&(this.gameResultElement.textContent="–ü–æ—Ä–∞–∂–µ–Ω–∏–µ",this.gameResultElement.classList.add("loseMenu"),this.gameResultElement.style.display="block"),setTimeout(()=>this.onLose(),1e3)}destroy(){this.gameLoop&&clearInterval(this.gameLoop),this.fallingObjects.forEach(e=>e.remove()),this.bucket.remove(),this.scoreDisplay.remove(),this.gameResultElement&&(this.gameResultElement.remove(),this.gameResultElement=null)}}class I{bonusDisplay;spinButton;prizeDisplay;bonuses=0;spinning=!1;constructor(e){this.loadBonuses(),this.createUI(e)}createUI(e){const t=document.getElementById(e);t.innerHTML="",this.bonusDisplay=document.createElement("div"),this.bonusDisplay.className="bonus-display",this.bonusDisplay.textContent=`–ë–æ–Ω—É—Å—ã: ${this.bonuses}`,t.appendChild(this.bonusDisplay),this.spinButton=document.createElement("button"),this.spinButton.className="spin-button",this.spinButton.textContent="–ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ",this.spinButton.disabled=this.bonuses<=0,this.spinButton.addEventListener("click",()=>this.spinWheel()),t.appendChild(this.spinButton),this.prizeDisplay=document.createElement("div"),this.prizeDisplay.className="prize-display",this.prizeDisplay.textContent="",t.appendChild(this.prizeDisplay)}spinWheel(){if(this.spinning||this.bonuses<=0)return;this.spinning=!0,this.bonuses--,this.saveBonuses(),this.updateBonusDisplay();const e=["10% —Å–∫–∏–¥–∫–∞ –Ω–∞ –≤—Å–µ –∑–∞–∫–∞–∑—ã –≤ –±—É–¥–Ω–∏–µ –¥–Ω–∏ —Å 12:00 –¥–æ 15:00","10% —Å–∫–∏–¥–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 2000 —Ä—É–±–ª–µ–π –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö-–ø–∞—Ä—Ç–Ω—ë—Ä–∞—Ö","20% —Å–∫–∏–¥–∫–∞ –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–∞–Ω—á–∏ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö —Å–µ—Ç–∏ ¬´–ï–≤—Ä–∞–∑–∏—è¬ª","20% —Å–∫–∏–¥–∫–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏","30% —Å–∫–∏–¥–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –∏–∑ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –∞–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–∏","30% —Å–∫–∏–¥–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑ –≤ ¬´–í–∫—É—Å–Ω–æ ‚Äî –∏ —Ç–æ—á–∫–∞¬ª –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 1500 —Ä—É–±–ª–µ–π","30% —Å–∫–∏–¥–∫–∞ –Ω–∞ –º–µ—Å—è—á–Ω—ã–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç –¥–æ—Å—Ç–∞–≤–∫–∏","50% —Å–∫–∏–¥–∫–∞ –Ω–∞ –¥–µ—Å–µ—Ä—Ç—ã –≤ –∫–∞—Ñ–µ ¬´–®–æ–∫–æ–ª–∞–¥–Ω–∏—Ü–∞¬ª","50% —Å–∫–∏–¥–∫–∞ –Ω–∞ –≤—Ç–æ—Ä–æ–π —Å–µ—Ç —Ä–æ–ª–ª–æ–≤ –≤ ¬´–Å–±–∏–î–æ—ë–±–∏¬ª","50% —Å–∫–∏–¥–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –¥–æ 16:00","100% —Å–∫–∏–¥–∫–∞ –Ω–∞ –¥–µ—Å–µ—Ä—Ç –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 3000 —Ä—É–±–ª–µ–π","100% —Å–∫–∏–¥–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5000 —Ä—É–±–ª–µ–π"];let t=0;const n=setInterval(()=>{const s=Math.floor(Math.random()*e.length);if(this.prizeDisplay.textContent=e[s],t++,t>=30){clearInterval(n);const o=Math.floor(Math.random()*e.length);this.prizeDisplay.textContent=`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: ${e[o]}`,this.spinning=!1}},100)}updateBonusDisplay(){this.bonusDisplay.textContent=`–ë–æ–Ω—É—Å—ã: ${this.bonuses}`,this.spinButton.disabled=this.bonuses<=0}addBonuses(e){this.bonuses+=e,this.saveBonuses(),this.updateBonusDisplay()}loadBonuses(){const e=localStorage.getItem("tamagotchi_bonuses");e&&(this.bonuses=parseInt(e))}saveBonuses(){localStorage.setItem("tamagotchi_bonuses",this.bonuses.toString())}}const d=3,R=3,f=R*60*60*1e3,E=["–î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä—É–π –ø–æ—Ä—Ç—Ñ–µ–ª—å ‚Äî –º–µ–Ω—å—à–µ —Ä–∏—Å–∫.","–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ, –∞ –Ω–µ —Ä–∞–∑–æ–≤–æ.","–î–µ—Ä–∂–∏ –ø–æ–¥—É—à–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –æ–±–ª–∏–≥–∞—Ü–∏—è—Ö.","–ü—Ä–æ–≤–µ—Ä—å –∫–æ–º–∏—Å—Å–∏–∏ –ø–µ—Ä–µ–¥ —Å–¥–µ–ª–∫–æ–π.","–ö—É–ø–∏ –≤–∞–ª—é—Ç—É, –∫–æ–≥–¥–∞ –æ–Ω–∞ –¥–µ—à–µ–≤–∞—è.","–°–¥–µ–ª–∞–π –¥–æ—Å—Ä–æ—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–∞.","–£–ø—Ä–∞–≤–ª—è–π —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫–∞ !.","–°–±–µ—Ä–µ–≥–∞–π –¥–µ–Ω—å–≥–∏ –Ω–∞ –¥–µ–ø–æ–∑–∏—Ç–µ.","–ò–∑—É—á–∞–π —Ä—ã–Ω–æ–∫ –ø–µ—Ä–µ–¥ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.","–ò—Å–ø–æ–ª—å–∑—É–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–∞."],u=document.getElementById("phrase"),c=document.getElementById("feedButton"),C=document.getElementById("main-menu"),y=document.getElementById("gamepad");let r=!1,i=null,l=d,h=Date.now();const g=new B("gameModal"),S=document.getElementById("closeModal");S.addEventListener("click",()=>{i&&(i.destroy(),i=null),r=!1,c.disabled=!0});const k=new B("bonusModal","closeBonusModal"),w=new I("bonusCanvas"),b=document.createElement("div");b.className="energy-display";document.querySelector(".bear").appendChild(b);const m=document.createElement("div");m.className="timer-display";document.querySelector(".bear").appendChild(m);function x(){const a=localStorage.getItem("tamagotchi_energy"),e=localStorage.getItem("tamagotchi_lastRegen");a&&(l=parseInt(a)),e&&(h=parseInt(e));const n=Date.now()-h,s=Math.floor(n/f);l=Math.max(0,Math.min(d,l+s)),s>0&&(h+=s*f,D())}function D(){localStorage.setItem("tamagotchi_energy",l.toString()),localStorage.setItem("tamagotchi_lastRegen",h.toString())}function v(){if(b.textContent=`–≠–Ω–µ—Ä–≥–∏—è: ${l}/${d}`,y.disabled=l<=0,l<d){const a=h+f,e=Math.ceil((a-Date.now())/(1e3*60*60));m.textContent=`–î–æ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${e} —á`}else m.textContent=""}c.addEventListener("click",()=>{if(!r)return;const a=Math.floor(Math.random()*E.length);u.textContent=E[a],u.classList.remove("animate"),u.offsetWidth,u.classList.add("animate"),w.addBonuses(1),r=!1,c.disabled=!0});y.addEventListener("click",()=>{i&&(i.destroy(),i=null),r=!1,c.disabled=!0});C.addEventListener("click",()=>{k.open()});y.addEventListener("click",()=>{l<=0||(i&&(i.destroy(),i=null),r=!1,c.disabled=!0,l--,D(),v(),g.open(),i=new L("gameCanvas",()=>{r=!0,c.disabled=!1,g.close(),i&&(i.destroy(),i=null)},()=>{r=!1,c.disabled=!0,g.close(),i&&(i.destroy(),i=null)}))});x();v();setInterval(v,6e4);
