(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class m{modal;closeButton;constructor(t){this.modal=document.getElementById(t),this.closeButton=document.getElementById("closeModal"),this.init()}init(){this.closeButton.addEventListener("click",()=>this.close()),this.modal.addEventListener("click",t=>{t.target===this.modal&&this.close()})}open(){this.modal.classList.add("show")}close(){this.modal.classList.remove("show")}}class f{element;onMove;startX=0;isDragging=!1;constructor(t,e){this.element=t,this.onMove=e,this.init()}init(){this.element.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),this.element.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),this.element.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!1})}handleTouchStart(t){t.preventDefault(),this.startX=t.touches[0].clientX,this.isDragging=!0}handleTouchMove(t){if(!this.isDragging)return;t.preventDefault();const e=t.touches[0].clientX,i=e-this.startX;this.onMove(i),this.startX=e}handleTouchEnd(t){this.isDragging=!1}}class g{canvas;bucket;bucketPosition=50;fallingObjects=[];score=0;winScore=1;gameLoop=null;onWin;touchInput;constructor(t,e){this.canvas=document.getElementById(t),this.onWin=e,this.createBucket(),this.touchInput=new f(this.canvas,i=>this.moveBucket(i)),this.startGame()}createBucket(){this.bucket=document.createElement("div"),this.bucket.className="bucket",this.canvas.appendChild(this.bucket)}moveBucket(t){const e=this.canvas.clientWidth,i=this.bucket.clientWidth;this.bucketPosition+=t/e*100,this.bucketPosition=Math.max(0,Math.min(100,this.bucketPosition));const s=this.bucketPosition/100*(e-i);this.bucket.style.left=`${s}px`}startGame(){this.gameLoop=setInterval(()=>{this.updateFallingObjects(),this.spawnFallingObject()},100)}spawnFallingObject(){if(Math.random()<.02){const t=document.createElement("div");t.className="falling-object",t.style.left=`${Math.random()*80+10}%`,this.canvas.appendChild(t),this.fallingObjects.push(t)}}updateFallingObjects(){this.fallingObjects.forEach((t,e)=>{const i=parseFloat(t.style.top||"0")+2;t.style.top=`${i}px`,this.checkCollision(t)?(this.score++,t.remove(),this.fallingObjects.splice(e,1),this.score>=this.winScore&&this.win()):i>this.canvas.clientHeight&&(t.remove(),this.fallingObjects.splice(e,1))})}checkCollision(t){const e=t.getBoundingClientRect(),i=this.bucket.getBoundingClientRect();return!(e.right<i.left||e.left>i.right||e.bottom<i.top||e.top>i.bottom)}win(){this.gameLoop&&clearInterval(this.gameLoop),this.onWin()}destroy(){this.gameLoop&&clearInterval(this.gameLoop),this.fallingObjects.forEach(t=>t.remove()),this.bucket.remove()}}const d=["Акции бы…","Диверсифицируй портфель — меньше риск.","Инвестируй регулярно, а не разово.","Держи подушку безопасности в облигациях.","Проверь комиссии перед сделкой.","Купи валюту, когда она дешевая.","Сделай досрочное погашение кредита.","Управляй финансами через мобильное приложение.","Сберегай деньги на депозите.","Изучай рынок перед инвестированием.","Используй кредитные карты для быстрого погашения долга.","Управляй финансами через мобильное приложение."],c=document.getElementById("phrase"),r=document.getElementById("feedButton");document.getElementById("main-menu");const p=document.getElementById("gamepad");let h=!1,a=null;const u=new m("gameModal");r.addEventListener("click",()=>{if(!h)return;const o=Math.floor(Math.random()*d.length);c.textContent=d[o],c.classList.remove("animate"),c.offsetWidth,c.classList.add("animate"),h=!1,r.disabled=!0});p.addEventListener("click",()=>{u.open(),a=new g("gameCanvas",()=>{h=!0,r.disabled=!1,u.close(),a&&(a.destroy(),a=null)})});
